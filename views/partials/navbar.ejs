<!-- Navbar-specific CSS -->
<link rel="stylesheet" href="./css/navBar.css" />

<% if (!user) { %>
  <script type="module" src="/js/modal.js"></script>
  <% } %>

<!-- Translate related -->
<script>
  window.gtranslateSettings = {
    default_language: "en",
    native_language_names: false,
    detect_browser_language: true,
    languages: ["en", "ar", "es", "fr", "de"],
    wrapper_selector: ".gtranslate_wrapper",
  };
</script>
<script
  src="https://cdn.gtranslate.net/widgets/latest/dropdown.js"
  defer
></script>

<!-- Navbar Code -->
<nav>
  <!-- Left side container with logo and translate -->
  <div class="left-container-nav">
    <div class="logo">
      <a href="/">
        <img src="/img/logo.png" alt="Logo" />
      </a>
    </div>
    <% if (typeof showQuizProgressBar !== 'undefined' && showQuizProgressBar) { %>
      <div class="quiz-navbar-progress-bar-outer">
        <div class="progress-bar-images">
          <img src="/img/ScentLeft.jpg" alt="Scent Left" class="progress-bar-img scent-left-img" />
        </div>
        <div class="quiz-navbar-progress-bar-track">
          <div class="quiz-navbar-progress-bar-fill"></div>
          <div class="quiz-navbar-progress-bar-circle circle-1"><span class="circle-number">1</span><span class="circle-label">About</span></div>
          <div class="quiz-navbar-progress-bar-circle circle-2"><span class="circle-number">2</span><span class="circle-label">Personality</span></div>
          <div class="quiz-navbar-progress-bar-circle circle-3"><span class="circle-number">3</span><span class="circle-label">Scents</span></div>
        </div>
        <div class="progress-bar-images">
          <img src="/img/bottleRight.jpg" alt="Bottle Right" class="progress-bar-img bottle-right-img" />
        </div>
      </div>
    <% } %>
    <!-- Translate will be inside actions -->
  </div>

  <!-- Right side actions (search, login, cart, logout) -->
  <div class="actions">
    <ul>
      <li><div class="gtranslate_wrapper"></div></li>
      <li>
        <button
          style="border: none; background-color: transparent"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasRight"
          aria-controls="offcanvasRight"
        >
          <i class="fa-solid fa-cart-shopping"></i>
        </button>
      </li>

      <% if (user) { %>
      <li>
        <a href="/api/auth/logout" id="logoutLink">
          <i class="fa-solid fa-right-from-bracket"></i>
        </a>
      </li>
      <li>
        <div class="profile">
          <a href="/account/<%= user._id %>">
            <img src="<%= user.profilePic %>" class="avoid-dark-mode" alt="Logo" />
          </a>
        </div>
      </li>

      <% } else { %>
      <li>
        <button
          style="border: none; background-color: transparent"
          data-bs-toggle="modal"
          data-bs-target="#loginModal"
        >
          <i class="fa-regular fa-circle-user"></i>
        </button>
      </li>
      <% } %>
    </ul>
  </div>

  <!-- Mobile menu button -->
  <button class="mobile-menu-btn">
    <i class="fa-solid fa-bars"></i>
  </button>

  <!-- Navbar links -->
  <div class="links">
    <ul>
      <div class="mobile-logo">
        <a href="/">
          <img src="./img/logo.png" alt="Logo" />
        </a>
      </div>
      <li><a href="/all-fragrances">Fragrances</a></li>
      <li><a href="/collections">Collections</a></li>
      <li><a href="/gifting">Gifting</a></li>
      <li><a href="/fragrance-quiz">Quiz</a></li>
      <li><a href="/our-story">Our Story</a></li>

      <% if (user != null && user.role =='admin') { %>
        <li><a href="/admin/<%= user.id %>">Admin</a></li>
      <% } %>
    </ul>
  </div>
</nav>